
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Setting up SSH via USB connection on Windows - sharedInstance</title>
  <meta name="author" content="sharedInstance">

  
  <meta name="description" content="This is a version of Aehmlo&rsquo;s original post, modified for Windows. When developing tweaks (or making themes, for that matter), it is often &hellip;">
  

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sharedinstance.net/2015/02/setting-up-ssh-via-usb-connection-win">
  <link rel="icon" href="/favicon.png?rev=2">
  <link rel="stylesheet" href="/stylesheets/screen.css">
  <link rel="alternate" href="/atom.xml" title="sharedInstance" type="application/atom+xml">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:700|Source+Code+Pro:400,700">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-28374943-5']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">sharedInstance</a></h1>
  <p><a href="#navigation" title="Navigation" id="js-navbutton">&#x2261;</a></p>
</hgroup>

</header>
  <nav role="navigation">
    <div class="container">  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:sharedinstance.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>

<div class="clear"></div>
</div>
  </nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Setting up SSH via USB connection on Windows</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-15T09:58:08+10:30'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>9:58 am</span></time>
        
           &mdash; <a href="#disqus_thread"
             data-disqus-identifier="http://sharedinstance.net">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>This is a version of Aehmlo&rsquo;s original post, modified for Windows.</p>

<p>When developing tweaks (or making themes, for that matter), it is often annoying to wait for files to copy (and commands to execute) over Wi-Fi - it tends to be very slow and sometimes unreliable, and one must keep track of IP addresses and such (even if they use a hosts file to map custom hostnames) in order to accomplish it. This annoyance can be greatly relieved by creating a local tunnel over a USB connection to the target device, and using that to SSH to the device much more quickly and reliably. In this tutorial, we will cover how to set up your Windows PC (there are other posts for <a href="/2015/02/setting-up-ssh-via-usb-connection-linux/">Linux</a> and <a href="/2014/12/setting-up-ssh-via-usb-connection/">OS X</a>) so that port 2222 is forwarded to port 22 on whatever device is plugged in.</p>

<!--more-->


<p>First things first, download the client from its <a href="https://code.google.com/p/iphonetunnel-usbmuxconnectbyport/downloads/detail?name=itunnel_mux_rev71.zip">download page</a> (note that you will need Windows XP and iTunes 10.5 or later for the client to work). Extract this zip - make sure you extract both the executable and the dll.</p>

<p>In Command Prompt, <code>cd</code> to the folder you extracted the zip to and run the following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>itunnel_mux --iport <span class="m">22</span> --lport 2222
</span></code></pre></td></tr></table></div></figure>


<p>From now on, the relay we have set up will always be running the background once you log in. Try it out in PuTTY by connecting to SSH at localhost, port 2222.</p>

<p>If you use Cygwin, you can easily register this as a Windows service so it&rsquo;s always running. You will need to use the Cygwin setup from <a href="https://cygwin.com">cygwin.com</a> to install <em>cygrunsrv</em>, under the Admin category. Now, from a Cygwin shell run as an administrator:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>cygrunsrv -I iTunnel -p /cygdrive/c/path/to/itunnel_mux.exe -a <span class="s1">&#39;--iport 22 --lport 2222&#39;</span> -u <span class="s1">&#39;NETWORK SERVICE&#39;</span> -y <span class="s1">&#39;Apple Mobile Device&#39;</span>
</span><span class='line'>net start itunnel
</span></code></pre></td></tr></table></div></figure>


<p>This creates a service with the name <code>itunnel</code>, which will run itunnel_mux.exe with the provided arguments. It&rsquo;ll execute as Windows&#8217; built in <code>NetworkService</code> account, and requires the Apple Mobile Device service to be up and running before iTunnel can start.</p>

<p>When you update Cygwin packages, you should execute <code>net stop itunnel</code> (again, as an administrator) before the update and <code>net start itunnel</code> after. Otherwise, you may be told to restart your computer to replace in-use files.</p>

<p>Take a look at the <a href="/2014/12/setting-up-ssh-via-usb-connection/">original OS X post</a> to find out how to use this with Theos, and to prevent a false security error if you plug in a different device.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">CoolStar</span></span>
 &mdash;
      




<time class='entry-date' datetime='2015-02-15T09:58:08+10:30'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>9:58 am</span></time> &mdash;
      

<span class="categories">
  
    <a class='category' href='/categories/sbblog/'>sbblog</a>
  
</span>


    </p>
    <p class="meta">
      
        <a class="basic-alignment left" href="/2014/12/setting-up-ssh-via-usb-connection/" title="Previous Post: Setting up SSH via USB connection on OS X">&laquo; Setting up SSH via USB connection on OS X</a>
      
      
        <a class="basic-alignment right" href="/2015/02/setting-up-ssh-via-usb-connection-linux/" title="Next Post: Setting up SSH via USB connection on Linux">Setting up SSH via USB connection on Linux &raquo;</a>
      
    </p>
  </footer>
</article>

  <section class="comments">
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013&ndash;2015, sharedInstance &mdash;
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script>
      var disqus_shortname = 'sharedinstance';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://sharedinstance.net/2015/02/setting-up-ssh-via-usb-connection-win/';
        var disqus_url = 'http://sharedinstance.net/2015/02/setting-up-ssh-via-usb-connection-win/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


<script src="/javascripts/$.js"></script>
<script src="/javascripts/script.js"></script>


</body>
</html>
